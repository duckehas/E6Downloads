<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin – IP Lookup Requests</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
body { background: radial-gradient(1200px 800px at 10% 10%, #141826, #0f1115); color:#fff; font-family:Inter,sans-serif; padding:40px; }
h1 { color:#22c55e; margin-bottom:20px; }
.panel { background: rgba(0,0,0,0.6); border:1px solid rgba(255,255,255,0.12); border-radius:18px; padding:20px; box-shadow:0 20px 50px rgba(0,0,0,0.6); }
table { width:100%; border-collapse:collapse; }
th,td{padding:14px 12px;border-bottom:1px solid rgba(255,255,255,0.1);text-align:left;}
th{color:#22c55e;font-weight:600;}
tr:hover{background: rgba(34,197,94,0.08);}
.badge{background:#22c55e;color:#111;padding:4px 10px;border-radius:999px;font-weight:600;font-size:12px;}
.button{padding:6px 12px;margin-right:6px;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:0.2s;}
.accept-btn{background:#22c55e;color:#111;}
.accept-btn:hover{box-shadow:0 6px 12px rgba(34,197,94,0.45);}
.decline-btn{background:#ff6b6b;color:#111;}
.decline-btn:hover{box-shadow:0 6px 12px rgba(255,107,107,0.45);}
.clear-btn{margin-top:20px;background:#22c55e;color:#111;border:none;padding:12px 18px;border-radius:12px;font-weight:700;cursor:pointer;}
.clear-btn:hover{box-shadow:0 6px 18px rgba(34,197,94,0.45);}
.empty{text-align:center;padding:40px;color:#9fb4aa;}
</style>
</head>
<body>

<h1>Admin Panel – IP Lookup Requests</h1>

<div class="panel">
  <table>
    <thead>
      <tr><th>IP Address</th><th>Discord ID</th><th>Time</th><th>Status</th><th>Action</th></tr>
    </thead>
    <tbody id="logBody"><tr class="empty"><td colspan="5">Waiting for requests…</td></tr></tbody>
  </table>
  <button class="clear-btn" id="clearLogs">Clear Logs</button>
</div>

<script>
const logBody = document.getElementById("logBody");
const clearBtn = document.getElementById("clearLogs");
const channel = new BroadcastChannel("ip_requests");
let logs = JSON.parse(localStorage.getItem("ipLogs")||"[]");

function render(){
  logBody.innerHTML = "";
  if(logs.length===0){ logBody.innerHTML=`<tr class="empty"><td colspan="5">No requests yet</td></tr>`; return; }
  logs.forEach((l,i)=>{
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${l.ip||'N/A'}</td>
      <td>${l.discordId}</td>
      <td>${new Date(l.time).toLocaleString()}</td>
      <td>${l.status==='pending'?'<span class="badge">NEW</span>':l.status==='accepted'?'<span class="badge">ACCEPTED</span>':'<span class="badge" style="background:#ff6b6b">DECLINED</span>'}</td>
      <td>${l.status==='pending'?`<button class="button accept-btn" data-index="${i}">Accept</button>
      <button class="button decline-btn" data-index="${i}">Decline</button>`:''}</td>
    `;
    logBody.appendChild(tr);
  });
}

channel.onmessage = e=>{
  logs.unshift({...e.data,status:'pending'});
  localStorage.setItem("ipLogs", JSON.stringify(logs));
  render();
};

logBody.addEventListener("click",e=>{
  if(e.target.classList.contains("accept-btn")){
    const idx = e.target.dataset.index; logs[idx].status='accepted'; localStorage.setItem("ipLogs",JSON.stringify(logs)); render();
  }
  if(e.target.classList.contains("decline-btn")){
    const idx = e.target.dataset.index; logs[idx].status='declined'; localStorage.setItem("ipLogs",JSON.stringify(logs)); render();
  }
});

clearBtn.onclick = ()=>{
  if(!confirm("Clear all logs?")) return; logs=[]; localStorage.removeItem("ipLogs"); render();
};

render();
</script>
</body>
</html>
<script>
/* ================================
   BASIC ANTI-INSPECT
================================ */

// Disable right click
document.addEventListener('contextmenu', e => e.preventDefault());

// Disable text selection
document.addEventListener('selectstart', e => e.preventDefault());

// Disable drag (images, text)
document.addEventListener('dragstart', e => e.preventDefault());

// Block common key combos
document.addEventListener('keydown', function(e){
  const key = e.key.toLowerCase();

  // F12
  if (e.keyCode === 123) e.preventDefault();

  // Ctrl / Cmd combos (except copy/paste/cut now)
  if ((e.ctrlKey || e.metaKey) && (
    key === 's' || // save
    key === 'u' || // view source
    key === 'p' || // print
    key === 'a' || // select all
    key === 'i' || // inspect
    key === 'j'    // dev console
  )) {
    e.preventDefault();
  }

  // Ctrl + Shift combos
  if ((e.ctrlKey || e.metaKey) && e.shiftKey && (
    key === 'i' || key === 'j' || key === 'c'
  )) {
    e.preventDefault();
  }
});

// Detect devtools open (size-based)
(function(){
  let devtoolsOpen = false;
  const threshold = 160;

  setInterval(() => {
    const widthDiff = window.outerWidth - window.innerWidth;
    const heightDiff = window.outerHeight - window.innerHeight;

    if (widthDiff > threshold || heightDiff > threshold) {
      if (!devtoolsOpen) {
        devtoolsOpen = true;
        document.body.innerHTML = `
          <div style="
            display:flex;
            align-items:center;
            justify-content:center;
            height:100vh;
            background:#0f1115;
            color:#22c55e;
            font-family:Inter,sans-serif;
            font-size:22px;
            text-align:center;
          ">
            Developer tools detected.<br>Access denied.
          </div>
        `;
      }
    }
  }, 500);
})();

// Disable console usage
(function(){
  const noop = ()=>{};
  console.log = noop;
  console.warn = noop;
  console.error = noop;
  console.info = noop;
  console.debug = noop;
})();

// Block iframe embedding
if (window.top !== window.self) {
  window.top.location = window.self.location;
}
</script>
<script>
/* ================================
   BASIC ANTI-INSPECT
================================ */

// Disable right click
document.addEventListener('contextmenu', e => e.preventDefault());

// Disable text selection
document.addEventListener('selectstart', e => e.preventDefault());

// Disable drag (images, text)
document.addEventListener('dragstart', e => e.preventDefault());

// Block common key combos
document.addEventListener('keydown', function(e){
  const key = e.key.toLowerCase();

  // F12
  if (e.keyCode === 123) e.preventDefault();

  // Ctrl / Cmd combos (except copy/paste/cut now)
  if ((e.ctrlKey || e.metaKey) && (
    key === 's' || // save
    key === 'u' || // view source
    key === 'p' || // print
    key === 'a' || // select all
    key === 'i' || // inspect
    key === 'j'    // dev console
  )) {
    e.preventDefault();
  }

  // Ctrl + Shift combos
  if ((e.ctrlKey || e.metaKey) && e.shiftKey && (
    key === 'i' || key === 'j' || key === 'c'
  )) {
    e.preventDefault();
  }
});

// Detect devtools open (size-based)
(function(){
  let devtoolsOpen = false;
  const threshold = 160;

  setInterval(() => {
    const widthDiff = window.outerWidth - window.innerWidth;
    const heightDiff = window.outerHeight - window.innerHeight;

    if (widthDiff > threshold || heightDiff > threshold) {
      if (!devtoolsOpen) {
        devtoolsOpen = true;
        document.body.innerHTML = `
          <div style="
            display:flex;
            align-items:center;
            justify-content:center;
            height:100vh;
            background:#0f1115;
            color:#22c55e;
            font-family:Inter,sans-serif;
            font-size:22px;
            text-align:center;
          ">
            Developer tools detected.<br>Access denied.
          </div>
        `;
      }
    }
  }, 500);
})();

// Disable console usage
(function(){
  const noop = ()=>{};
  console.log = noop;
  console.warn = noop;
  console.error = noop;
  console.info = noop;
  console.debug = noop;
})();

// Block iframe embedding
if (window.top !== window.self) {
  window.top.location = window.self.location;
}
</script>
